example_glue_databrew:
  dag_id: example_glue_databrew
  params: {}
  default_args:
    start_date: '2026-01-01'
  schedule: '@once'
  tasks:
    create_bucket:
      operator: airflow.providers.amazon.aws.operators.s3.S3CreateBucketOperator
      aws_conn_id: aws_default
      bucket_name: test-bucket-databrew
      outlets: []
      params: {}
      priority_weight: 1
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: create_bucket
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: []
    create_output_bucket:
      operator: airflow.providers.amazon.aws.operators.s3.S3CreateBucketOperator
      aws_conn_id: aws_default
      bucket_name: test-output-bucket-databrew
      outlets: []
      params: {}
      priority_weight: 1
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: create_output_bucket
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: [create_bucket]
    upload_file:
      operator: airflow.providers.amazon.aws.operators.s3.S3CreateObjectOperator
      aws_conn_id: aws_default
      data: '{}'
      encrypt: false
      outlets: []
      params: {}
      priority_weight: 1
      replace: true
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      s3_bucket: test-bucket-databrew
      s3_key: data.json
      task_id: upload_file
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: [create_output_bucket]
    startjob:
      operator: airflow.providers.amazon.aws.operators.glue_databrew.GlueDataBrewStartJobOperator
      aws_conn_id: aws_default
      deferrable: false
      job_name: test-databrew-job
      outlets: []
      params: {}
      priority_weight: 1
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: startjob
      trigger_rule: all_success
      wait_for_completion: true
      wait_for_downstream: false
      waiter_delay: 15
      waiter_max_attempts: 60
      dependencies: [create_job]
    delete_bucket:
      operator: airflow.providers.amazon.aws.operators.s3.S3DeleteBucketOperator
      aws_conn_id: aws_default
      bucket_name: test-bucket-databrew
      force_delete: true
      outlets: []
      params: {}
      priority_weight: 1
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: delete_bucket
      trigger_rule: all_done
      wait_for_downstream: false
      dependencies: [delete_dataset]
    delete_output_bucket:
      operator: airflow.providers.amazon.aws.operators.s3.S3DeleteBucketOperator
      aws_conn_id: aws_default
      bucket_name: test-output-bucket-databrew
      force_delete: true
      outlets: []
      params: {}
      priority_weight: 1
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: delete_output_bucket
      trigger_rule: all_done
      wait_for_downstream: false
      dependencies: [delete_bucket]
    create_dataset:
      outlets: []
      params: {}
      priority_weight: 1
      python_callable: airflow_glue_databrew.create_dataset
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: create_dataset
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: [upload_file]
      decorator: airflow.decorators.task
      dataset_name: test-dataset
      bucket_name: test-bucket-databrew
      object_key: data.json
    create_job:
      outlets: []
      params: {}
      priority_weight: 1
      python_callable: airflow_glue_databrew.create_job
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: create_job
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: [create_dataset]
      decorator: airflow.decorators.task
      dataset_name: test-dataset
      job_name: test-databrew-job
      bucket_output_name: test-output-bucket-databrew
      object_output_key: output.json
      role_arn: test-role-arn
    delete_job:
      outlets: []
      params: {}
      priority_weight: 1
      python_callable: airflow_glue_databrew.delete_job
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: delete_job
      trigger_rule: all_done
      wait_for_downstream: false
      dependencies: [startjob]
      decorator: airflow.decorators.task
      job_name: test-databrew-job
    delete_dataset:
      outlets: []
      params: {}
      priority_weight: 1
      python_callable: airflow_glue_databrew.delete_dataset
      retries: 0
      retry_delay: 300.0
      retry_exponential_backoff: false
      task_id: delete_dataset
      trigger_rule: all_done
      wait_for_downstream: false
      dependencies: [delete_job]
      decorator: airflow.decorators.task
      dataset_name: test-dataset
