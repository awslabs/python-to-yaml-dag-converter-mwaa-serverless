aws_analytics:
  dag_id: aws_analytics
  params: {}
  default_args:
    owner: airflow
    start_date:
      __type__: datetime.datetime
      year: 2026
      month: 1
      day: 1
    retries: 1
    retry_delay:
      __type__: datetime.timedelta
      seconds: 300.0
  schedule: '@hourly'
  tasks:
    create_bucket_analytics-reports:
      operator: airflow.providers.amazon.aws.operators.s3.S3CreateBucketOperator
      aws_conn_id: aws_default
      bucket_name: analytics-reports
      outlets: []
      params: {}
      priority_weight: 1
      region_name: us-west-2
      retries: 1
      retry_delay:
        __type__: datetime.timedelta
        seconds: 300.0
      retry_exponential_backoff: false
      start_date:
        __type__: datetime.datetime
        year: 2026
        month: 1
        day: 1
      task_id: create_bucket_analytics-reports
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies: []
    create_file_analytics-reports_reports_daily.json:
      operator: airflow.providers.amazon.aws.operators.s3.S3CreateObjectOperator
      aws_conn_id: aws_default
      data: '{"status":"ok"}'
      encrypt: false
      outlets: []
      params: {}
      priority_weight: 1
      replace: true
      retries: 1
      retry_delay:
        __type__: datetime.timedelta
        seconds: 300.0
      retry_exponential_backoff: false
      s3_bucket: analytics-reports
      s3_key: reports/daily.json
      start_date:
        __type__: datetime.datetime
        year: 2026
        month: 1
        day: 1
      task_id: create_file_analytics-reports_reports_daily.json
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies:
      - create_bucket_analytics-reports
    list_analytics-reports:
      operator: airflow.providers.amazon.aws.operators.s3.S3ListOperator
      apply_wildcard: false
      aws_conn_id: aws_default
      bucket: analytics-reports
      delimiter: ''
      outlets: []
      params: {}
      prefix: ''
      priority_weight: 1
      retries: 1
      retry_delay:
        __type__: datetime.timedelta
        seconds: 300.0
      retry_exponential_backoff: false
      start_date:
        __type__: datetime.datetime
        year: 2026
        month: 1
        day: 1
      task_id: list_analytics-reports
      trigger_rule: all_success
      wait_for_downstream: false
      dependencies:
      - create_file_analytics-reports_reports_daily.json
    sense_analytics-reports_reports_daily.json:
      operator: airflow.providers.amazon.aws.sensors.s3.S3KeySensor
      aws_conn_id: aws_default
      bucket_key: reports/daily.json
      bucket_name: analytics-reports
      deferrable: false
      metadata_keys:
      - Size
      - Key
      mode: poke
      outlets: []
      params: {}
      poke_interval: 30
      priority_weight: 1
      retries: 1
      retry_delay:
        __type__: datetime.timedelta
        seconds: 300.0
      retry_exponential_backoff: false
      start_date:
        __type__: datetime.datetime
        year: 2026
        month: 1
        day: 1
      task_id: sense_analytics-reports_reports_daily.json
      timeout: 300
      trigger_rule: all_success
      use_regex: false
      wait_for_downstream: false
      wildcard_match: false
      dependencies:
      - list_analytics-reports
  catchup: false
  dag_display_name: aws_analytics
  description: Dynamically generated AWS DAG for analytics
  owner_links: {}
  start_date:
    __type__: datetime.datetime
    year: 2026
    month: 1
    day: 1
  tags: []
